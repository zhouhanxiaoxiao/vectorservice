(function(t){function e(e){for(var s,n,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},i={app:0},r=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"32ba":function(t,e,a){"use strict";a("9307")},"37cd":function(t,e,a){t.exports=a.p+"img/todo.7b0086ad.png"},"423c":function(t,e,a){"use strict";a("6227")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("carrier-nav"),a("transition",{attrs:{name:"fade"}},[a("router-view")],1)],1)},r=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar navbar-expand-lg navbar-dark",staticStyle:{"background-color":"#0483c8"}},[s("a",{staticClass:"navbar-brand",staticStyle:{display:"inline-block"},on:{click:t.goHome}},[s("img",{staticStyle:{width:"200px"},attrs:{src:a("c676"),alt:""}})]),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("ul",{staticClass:"navbar-nav mr-auto",staticStyle:{"font-size":"20px"}},[s("li",{staticClass:"nav-item carrier-menu"},[s("router-link",{attrs:{to:"/home"}},[s("a",{staticClass:"nav-link"},[t._v(t._s(t.$t("home")))])])],1),s("li",{staticClass:"nav-item carrier-menu"},[s("router-link",{attrs:{to:"/service"}},[s("a",{staticClass:"nav-link"},[t._v(t._s(t.$t("serviceRequest")))])])],1),t._m(0)]),s("form",{staticClass:"form-inline my-2 my-lg-0"},[s("language"),s("div",{staticClass:"dropdown"},[s("button",{staticClass:"btn btn-outline-light dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.$t("hello")+"，"+t.user.name)+" ")]),s("div",{staticClass:"dropdown-menu dropdown-menu-right",staticStyle:{"font-size":"14px","line-height":"normal"}},[s("a",{staticClass:"dropdown-item",on:{click:t.gotoConfig}},[t._v(t._s(t.$t("config")))]),s("a",{staticClass:"dropdown-item",on:{click:t.casOut}},[t._v(t._s(t.$t("exit")))])])])],1)]),s("v-loading",{attrs:{show:t.loading}})],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item carrier-menu"},[a("a",{staticClass:"nav-link"},[t._v("Disabled")])])}],l=(a("b0c0"),{casLoginUrl:"http://119.90.33.35:8065/?service=",casOutUrl:"http://119.90.33.35:8065/logout",webCenter:"http://119.90.33.35:8064/#/",isNull:function(t){return null==t||(void 0==t||(""===t||0==t.length))}}),c=l,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isShow?a("div",{staticClass:"loading"},[a("div",{staticStyle:{display:"inline-block",width:"20%","margin-top":"20px"}},[a("Alert",[t._v("加载中....")])],1),a("svg",{staticClass:"svg-container"},[a("path",{attrs:{id:"pulsar",stroke:"rgba(0,155,155,1)",fill:"none","stroke-width":"3","stroke-linejoin":"round",d:"M0,90L250,90Q257,60 262,87T267,95 270,88 273,92t6,35 7,-60T290,127 297,107s2,-11 10,-10 1,1 8,-10T319,95c6,4 8,-6 10,-17s2,10 9,11h210"}})])]):t._e()},d=[],p={name:"v-loading",props:{show:Boolean},beforeMount:function(){this.isShow=this.show},data:function(){return{isShow:!1}},watch:{show:function(t){console.log(t),this.isShow=t}}},m=p,h=(a("32ba"),a("2877")),f=Object(h["a"])(m,u,d,!1,null,"66125d38",null),v=f.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-select",staticStyle:{color:"white",display:"inline-block",margin:"0 10px"}},[a("div",{staticClass:"btn-group btn-group-sm btn-group-toggle",attrs:{"data-toggle":"buttons"}},[a("label",{staticClass:"btn btn-link active",staticStyle:{color:"white"}},[a("input",{attrs:{type:"radio",name:"options",id:"option1",checked:""},on:{click:function(e){return t.changeLanguage("zh")}}}),t._v(" 中文 ")]),a("span",{staticStyle:{color:"white","font-size":"20px"}},[t._v("|")]),a("label",{staticClass:"btn btn-link",staticStyle:{color:"white"}},[a("input",{attrs:{type:"radio",name:"options",id:"option3"},on:{click:function(e){return t.changeLanguage("en")}}}),t._v(" English ")])])])},y=[],k={name:"language",methods:{changeLanguage:function(t){localStorage.setItem("local",t),window.location.reload()}}},$=k,b=Object(h["a"])($,g,y,!1,null,"2fa2e8c5",null),_=b.exports,x={name:"carrierNav",components:{Language:_,VLoading:v},data:function(){return{user:{},loading:!1}},beforeMount:function(){this.initPage()},methods:{initPage:function(){var t=this;this.$axios.get("/home/user").then((function(e){t.$store.commit("saveUser",e.data.retMap.user),t.user=e.data.retMap.user})).catch((function(t){console.log(t)}))},casOut:function(){this.loading=!0,window.open(c.casOutUrl),setTimeout((function(){window.location.reload()}),5e3)},goHome:function(){this.$router.push("/home")},gotoConfig:function(){this.$router.push("/config")}},computed:{hasUser:function(){return console.log(this.user.name),void 0!=this.user.name}}},w=x,S=(a("da17"),Object(h["a"])(w,n,o,!1,null,"135229c1",null)),O=S.exports,C={name:"App",components:{CarrierNav:O}},P=C,T=(a("034f"),Object(h["a"])(P,i,r,!1,null,null,null)),I=T.exports,E=a("8c4f"),M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{width:"90%","margin-left":"5%","margin-top":"50px"}},[a("taskpage")],1)])},A=[],L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("Card",{attrs:{title:t.$t("task.taskList")}},t._l(t.taskList,(function(e){return a("div",{key:e.id,staticStyle:{width:"100%"}},[a("raav-task",{attrs:{task:e,options:t.options},on:{reload:t.initPage}})],1)})),0),a("v-loading",{attrs:{show:t.loading}})],1)},j=[],N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Card",{staticStyle:{width:"100%"},attrs:{title:t.task.taskname}},[s("template",{slot:"extra"},["00"===this.task.taskstatu?s("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"warning",disabled:!t.isPiConfirm},on:{click:t.showConfirmAlert}},[t._v(t._s(t.$t("task.PiConfirm")))]):t._e(),t.canReturn?s("Poptip",{attrs:{confirm:"",title:t.$t("task.deleteTask"),"ok-text":t.$t("yes"),"cancel-text":t.$t("no")},on:{"on-ok":t.deleteTask}},[s("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error"}},[t._v(" "+t._s(t.$t("task.delete"))+" ")])],1):t._e(),"90"===t.task.taskstatu?s("Tag",{attrs:{color:"error"}},[t._v(t._s(t.$t("task.piRefuse")+t.task.fail.reason))]):t._e(),"01"===t.task.taskstatu?s("div",{staticStyle:{"margin-right":"20px"}},[s("img",{staticStyle:{width:"30px"},attrs:{src:a("37cd")}})]):t._e(),"02"===t.task.taskstatu?s("Poptip",{attrs:{confirm:"",title:t.$t("task.taskComplete"),"ok-text":t.$t("yes"),"cancel-text":t.$t("no")},on:{"on-ok":function(e){return t.updateTaskStatus("taskComplete","")}}},[s("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"success"}},[t._v(t._s(t.$t("task.cilentConfrim")))])],1):t._e(),"03"===t.task.taskstatu?s("Button",{attrs:{type:"warning"},on:{click:t.showEvaluation}},[t._v(t._s(t.$t("task.evaluation")))]):t._e(),"99"===t.task.taskstatu?s("div",[s("Tooltip",{staticStyle:{"word-break":"break-all !important"},attrs:{content:t.task.evaluation.evaluation,placement:"left-start","max-width":"300",transfer:!0}},[s("Rate",{staticStyle:{"font-size":"20px !important"},attrs:{"allow-half":"",disabled:""},model:{value:t.task.evaluation.score,callback:function(e){t.$set(t.task.evaluation,"score",e)},expression:"task.evaluation.score"}})],1)],1):t._e()],1),s("Table",{attrs:{columns:t.cols,data:t.task.raavs},scopedSlots:t._u([{key:"materialProvided",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.getOptionsText(a.materialprovided))+" ")]}},{key:"geneRisk",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.getOptionsText(a.generisk))+" ")]}},{key:"seroType",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.getOptionsText(a.serotype))+" ")]}},{key:"sharing",fn:function(e){var a=e.row;return[s("i-switch",{attrs:{disabled:!0},model:{value:a.sharing,callback:function(e){t.$set(a,"sharing",e)},expression:"row.sharing"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("yes")))]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("no")))])])]}},{key:"status",fn:function(e){var a=e.row,i=e.index;return[s("div",{staticStyle:{height:"50px"}},[s("Progress",{attrs:{percent:t.curPercent(a,i),"hide-info":!0,status:"active"}}),t._v(" "+t._s(t.marks[a.curstatu])+" "),s("div",{staticStyle:{display:"inline-block",float:"right"}},[t.isVecotrEditor?s("Select",{attrs:{size:"small",transfer:!0,disabled:"06"===a.curstatu},on:{"on-change":function(e){return t.changeCurrentItem(a)}},model:{value:a.curstatu,callback:function(e){t.$set(a,"curstatu",e)},expression:"row.curstatu"}},t._l(t.marks,(function(e,a){return s("Option",{key:a,attrs:{value:a}},[t._v(t._s(e))])})),1):t._e()],1)],1)]}},{key:"operator",fn:function(e){var a=e.row;return[s("Button",{attrs:{size:"small",disabled:!(t.canEdit(a.curstatu)&&t.isCurrentUser)},on:{click:function(e){return t.editRow(a)}}},[t._v(t._s(t.$t("edit")))])]}}])}),s("Modal",{attrs:{title:t.$t("edit"),"mask-closable":!1},on:{"on-ok":t.updateRow},model:{value:t.editFlag,callback:function(e){t.editFlag=e},expression:"editFlag"}},[s("Form",{ref:"editValidate",attrs:{model:t.editObj,rules:t.editObjRul,"label-width":150}},[s("FormItem",{attrs:{label:t.$t("raav.constructName"),prop:"constructname"}},[s("Input",{attrs:{placeholder:"Enter constructname"},model:{value:t.editObj.constructname,callback:function(e){t.$set(t.editObj,"constructname",e)},expression:"editObj.constructname"}})],1),s("FormItem",{attrs:{label:t.$t("raav.materialProvided"),prop:"materialprovided"}},[s("Select",{staticStyle:{width:"100%"},attrs:{transfer:!0},model:{value:t.editObj.materialprovided,callback:function(e){t.$set(t.editObj,"materialprovided",e)},expression:"editObj.materialprovided"}},t._l(t.getOptions("materialProvided"),(function(e){return s("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),s("FormItem",{attrs:{label:t.$t("raav.geneRisk"),prop:"generisk"}},[s("Select",{staticStyle:{width:"100%"},attrs:{transfer:!0},model:{value:t.editObj.generisk,callback:function(e){t.$set(t.editObj,"generisk",e)},expression:"editObj.generisk"}},t._l(t.getOptions("geneRisk"),(function(e){return s("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),s("FormItem",{attrs:{label:t.$t("raav.seroType"),prop:"serotype"}},[s("Select",{staticStyle:{width:"100%"},attrs:{transfer:!0},model:{value:t.editObj.serotype,callback:function(e){t.$set(t.editObj,"serotype",e)},expression:"editObj.serotype"}},t._l(t.getOptions("seroType"),(function(e){return s("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),s("FormItem",{attrs:{label:t.$t("raav.sharing"),prop:"sharing"}},[s("i-switch",{model:{value:t.editObj.sharing,callback:function(e){t.$set(t.editObj,"sharing",e)},expression:"editObj.sharing"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("yes")))]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("no")))])])],1),s("FormItem",{attrs:{label:t.$t("raav.count"),prop:"requestnum"}},[s("InputNumber",{staticStyle:{width:"100%"},attrs:{min:1},model:{value:t.editObj.requestnum,callback:function(e){t.$set(t.editObj,"requestnum",e)},expression:"editObj.requestnum"}})],1),s("FormItem",{attrs:{label:t.$t("raav.remark"),prop:"remark"}},[s("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"Enter something..."},model:{value:t.editObj.remark,callback:function(e){t.$set(t.editObj,"remark",e)},expression:"editObj.remark"}})],1)],1)],1),s("evaluation-alert",{ref:"evaluationAlert",on:{commitFun:t.commitEvaluation}}),s("comfirm-alert",{ref:"confirmAlert",on:{confirmFun:t.piConfirm}}),s("v-loading",{attrs:{show:t.loading}})],2)},R=[],z=(a("2ca0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"comfirmAlert",tabindex:"-1","aria-labelledby":"comfirmAlertLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"comfirmAlertLabel"}},[t._v(t._s(t.$t("task.approve")))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4 col-form-label",attrs:{for:"staticEmail"}},[t._v(t._s(this.$t("task.agreeTask")))]),a("div",{staticClass:"col-sm-8",attrs:{id:"staticEmail"}},[a("i-switch",{model:{value:t.flag,callback:function(e){t.flag=e},expression:"flag"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("yes")))]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("no")))])])],1)]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4 col-form-label",attrs:{for:"reason"}},[t._v(t._s(t.$t("reason")))]),a("div",{staticClass:"col-sm-8",attrs:{id:"reason"}},[a("Input",{attrs:{type:"textarea",rows:3,placeholder:"If you do not agree, please fill in the reason"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)])]),a("div",{staticClass:"modal-footer"},[a("Button",{attrs:{"data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),a("Button",{attrs:{type:"primary"},on:{click:t.commitData}},[t._v(t._s(t.$t("confirm")))])],1)])])])}),F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],V={name:"comfirmAlert",data:function(){return{reason:"",flag:!1}},methods:{commitData:function(){this.flag||0!==this.reason.length?(this.$("comfirmAlert").modal("hide"),this.$emit("confirmFun",this.flag,this.reason)):this.$Message.error(this.$t("task.placeEnterReason"))}}},q=V,B=Object(h["a"])(q,z,F,!1,null,"6b8798d4",null),U=B.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"evaluationAlert",tabindex:"-1","aria-labelledby":"evaluationAlertLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"evaluationAlertLabel"}},[t._v(t._s(t.$t("task.evaluation")))]),t._m(0)]),a("div",{staticClass:"modal-body",staticStyle:{"text-align":"center"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"stars"}},[t._v(t._s(t.$t("task.stars")))]),a("div",{attrs:{id:"stars"}},[a("Rate",{staticStyle:{"font-size":"40px !important"},attrs:{"allow-half":""},model:{value:t.stars,callback:function(e){t.stars=e},expression:"stars"}})],1)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"evaluation"}},[t._v(t._s(t.$t("task.suggest")))]),a("Input",{attrs:{id:"evaluation",type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"Enter something..."},model:{value:t.evaluation,callback:function(e){t.evaluation=e},expression:"evaluation"}})],1)]),a("div",{staticClass:"modal-footer"},[a("Button",{attrs:{"data-dismiss":"modal"}},[t._v(t._s(t.$t("cancel")))]),a("Button",{attrs:{type:"primary"},on:{click:t.commitData}},[t._v(t._s(t.$t("confirm")))])],1)])])])},J=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],G={name:"evaluationAlert",data:function(){return{stars:2.5,evaluation:""}},methods:{commitData:function(){this.$emit("commitFun",this.stars,this.evaluation)}}},H=G,Q=Object(h["a"])(H,D,J,!1,null,"a3509a34",null),W=Q.exports,K={name:"raavTask",components:{EvaluationAlert:W,ComfirmAlert:U,VLoading:v},props:{task:Object,options:Array},data:function(){return{confirmFlag:!1,editObj:{},editObjRul:{constructname:[{required:!0,message:"Enter constructname",trigger:"blur"}],requestnum:[{type:"number",required:!0,message:"Enter number",trigger:"blur"}]},editFlag:!1,loading:!1,cols:[],marks:{"00":this.$t("task.wait"),"01":this.$t("task.receive"),"02":this.$t("task.prepare"),"03":this.$t("task.package"),"04":this.$t("task.purification"),"05":this.$t("task.testing"),"06":this.$t("task.complete")}}},beforeMount:function(){this.initCols()},methods:{commitEvaluation:function(t,e){this.$(this.$refs.evaluationAlert.$el).modal("hide");var a={stars:t,evaluation:e,taskId:this.task.id},s=this;this.$axios.post("/task/evaluation/commit",a).then((function(){s.$Message.success(s.$t("commitSuccess")),s.$emit("reload")})).catch((function(t){console.log(t),s.$Message.error(s.$t("err.systemErr"))}))},showEvaluation:function(){this.$(this.$refs.evaluationAlert.$el).modal("show")},deleteTask:function(){this.loading=!0,this.$t("")},showConfirmAlert:function(){this.$(this.$refs.confirmAlert.$el).modal("show")},changeCurrentItem:function(t){var e={raav:JSON.stringify(t)};console.log(t);var a=this;this.$axios.post("/task/raav/updateStatu",e).then((function(){a.$Message.success(a.$t("commitSuccess")),a.$emit("reload")})).catch((function(t){console.log(t),a.$Message.error(a.$t("err.systemErr"))}))},curPercent:function(t,e){return console.log(e),100*parseInt(t.curstatu)/6},piConfirm:function(t,e){this.$(this.$refs.confirmAlert.$el).modal("hide"),t?this.updateTaskStatus("agree",e):this.updateTaskStatus("refuse",e)},updateTaskStatus:function(t,e){var a={taskId:this.task.id,flag:t,reason:e};this.loading=!0;var s=this;this.$axios.post("/task/updateStatus",a).then((function(t){s.loading=!1,"success"===t.data.code?(s.$Message.success(s.$t("commitSuccess")),s.$emit("reload")):(console.log(t),s.$Message.error(s.$t(t.data.code)))})).catch((function(t){s.loading=!1,console.log(t),s.$Message.error(s.$t("err.systemErr"))}))},updateRow:function(){var t=this,e=this;this.$refs["editValidate"].validate((function(a){if(a){var s={raav:JSON.stringify(e.editObj)};e.loading=!0,t.$axios.post("/task/updateRaav",s).then((function(t){e.loading=!1,"success"===t.data.code?(e.$Message.success(e.$t("commitSuccess")),e.$emit("reload")):e.$Message.error(e.$t(t.data.code))})).catch((function(t){e.loading=!1,console.log(t),e.$Message.error(e.$t("err.systemErr"))}))}else e.$Message.error(e.$t("err.placeEnter")),e.editFlag=!0}))},getOptions:function(t){var e=new Array;if(void 0===this.options)return e;for(var a=0;a<this.options.length;a++){var s=this.options[a];"raav"===s.pagetype&&s.selecttype===t&&"09"!==s.curstatu&&e.push(s)}return e},canEdit:function(t){return!this.task.taskstatu.startsWith("9")&&parseInt(t)<2},hideFormat:function(){return null},editRow:function(t){this.editObj=JSON.parse(JSON.stringify(t)),this.editFlag=!0},getOptionsText:function(t){if(void 0===this.options)return"";for(var e=0;e<this.options.length;e++){var a=this.options[e];if(a.id===t)return a.name}return""},initCols:function(){this.cols.push({title:this.$t("raav.constructName"),key:"constructname",width:150}),this.cols.push({title:this.$t("raav.materialProvided"),slot:"materialProvided"}),this.cols.push({title:this.$t("raav.geneRisk"),slot:"geneRisk"}),this.cols.push({title:this.$t("raav.seroType"),slot:"seroType"}),this.cols.push({title:this.$t("raav.sharing"),slot:"sharing",width:100}),this.cols.push({title:this.$t("raav.count"),key:"requestnum",width:60}),this.cols.push({title:this.$t("raav.remark"),key:"remark"}),this.cols.push({title:this.$t("task.process"),slot:"status",width:450}),this.cols.push({title:this.$t("task.operator"),slot:"operator"})}},computed:{isVecotrEditor:function(){return!("01"!==this.task.taskstatu||!this.$store.getters.isVectorEditor)},isCurrentUser:function(){return this.$store.getters.isCurrentUser(this.task.creater)},isPiConfirm:function(){return!("00"!==this.task.taskstatu||!this.$store.getters.isGroupAdmin)},canReturn:function(){if("00"!=this.task.taskstatu&&"01"!=this.task.taskstatu)return!1;if(!this.$store.getters.isCurrentUser(this.task.creater))return!1;for(var t=0;t<this.task.raavs.length;t++)if(parseInt(this.task.raavs[t].curstatu)>1)return!1;return!0}}},X=K,Y=Object(h["a"])(X,N,R,!1,null,"69060618",null),Z=Y.exports,tt={name:"taskpage",components:{RaavTask:Z,VLoading:v},data:function(){return{taskList:[],options:[],loading:!1}},mounted:function(){this.initPage()},methods:{initPage:function(){var t=this;this.$axios.get("/home/getTask").then((function(e){"success"===e.data.code?(t.taskList=e.data.retMap.tasks,t.options=e.data.retMap.options):(console.log(e),t.$Message.error(t.$t(e.data.code)))})).catch((function(e){console.log(e),t.$Message.error(t.$t("err.systemErr"))}))}},watch:{"$store.state.user":function(){this.initPage()}}},et=tt,at=Object(h["a"])(et,L,j,!1,null,"9521ca38",null),st=at.exports,it={name:"homeView",components:{Taskpage:st}},rt=it,nt=Object(h["a"])(rt,M,A,!1,null,"5406251c",null),ot=nt.exports,lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"90%","margin-top":"20px","margin-left":"5%","margin-bottom":"50px"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-4 col-md-3 col-lg-3 col-xl-3 service-item"},[s("Card",{staticStyle:{width:"100%"},nativeOn:{click:function(e){return t.gotorAAV(e)}}},[s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{width:"100%"},attrs:{src:a("bbec")}}),s("Divider"),s("h5",[t._v(t._s(t.$t("rAAVpackaging")))])],1)])],1),s("div",{staticClass:"col-sm-4 col-md-3 col-lg-3 col-xl-3 service-item"},[s("Card",{staticStyle:{width:"100%"}},[s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{width:"100%"},attrs:{src:a("bbec")}}),s("Divider"),s("h5",[t._v("rAAV包装")])],1)])],1),s("div",{staticClass:"col-sm-4 col-md-3 col-lg-3 col-xl-3 service-item"},[s("Card",{staticStyle:{width:"100%"}},[s("div",{staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{width:"100%"},attrs:{src:a("bbec")}}),s("Divider"),s("h5",[t._v("rAAV包装")])],1)])],1)])])},ct=[],ut={name:"service",methods:{gotorAAV:function(){this.$router.push("/rAAV")}}},dt=ut,pt=(a("423c"),Object(h["a"])(dt,lt,ct,!1,null,"4efd654c",null)),mt=pt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-bottom":"50px"}},[a("Modal",{attrs:{width:"360",closable:!1,"mask-closable":!1},model:{value:t.tipShow,callback:function(e){t.tipShow=e},expression:"tipShow"}},[a("p",{staticStyle:{color:"#f60","text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[t._v(t._s(t.$t("raav.tipTitle")))])],1),a("div",{staticStyle:{"text-align":"left","font-size":"14px"}},[a("p",[t._v(t._s(t.$t("raav.tip1")))]),a("p",[t._v(t._s(t.$t("raav.tip2")))]),a("p",[t._v(t._s(t.$t("raav.tip3")))]),a("p",[t._v(t._s(t.$t("raav.tip4")))]),a("Divider"),a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("Checkbox",{staticStyle:{"font-size":"16px"},model:{value:t.iknow,callback:function(e){t.iknow=e},expression:"iknow"}},[t._v(t._s(t.$t("raav.ikonw")))])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",size:"large",long:"",disabled:!t.iknow},on:{click:function(e){t.tipShow=!t.tipShow}}},[t._v(t._s(t.$t("confirm"))+" ")])],1)]),a("Card",{staticStyle:{width:"90%","margin-left":"5%","margin-top":"20px"}},[a("h2",[t._v(t._s(t.$t("raav.title")))])]),a("div",{staticStyle:{width:"90%","margin-left":"5%"}},[a("user-info")],1),a("div",{staticStyle:{width:"90%","margin-left":"5%","margin-top":"10px"}},[a("Card",{staticStyle:{width:"100%","margin-top":"20px"}},[a("h3",{staticStyle:{display:"inline-block"}},[t._v(t._s(t.$t("raav.projectInfo")))]),a("div",{staticStyle:{display:"inline-block",float:"right"}},[a("Button",{staticStyle:{margin:"0 5px"},attrs:{type:"primary"},on:{click:t.addNewRow}},[t._v(t._s(t.$t("add")))]),a("Button",{staticStyle:{margin:"0 5px"},attrs:{type:"success"},on:{click:t.commitTask}},[t._v(t._s(t.$t("commit")))])],1)]),a("Table",{attrs:{stripe:"",border:"",columns:t.cols,data:t.raavList},scopedSlots:t._u([{key:"constructName",fn:function(e){e.row;var s=e.index;return[a("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"Vector name or plasmid #"},model:{value:t.raavList[s].constructName,callback:function(e){t.$set(t.raavList[s],"constructName",e)},expression:"raavList[index].constructName"}})]}},{key:"materialProvided",fn:function(e){e.row;var s=e.index;return[a("Select",{staticStyle:{width:"100%"},attrs:{transfer:!0},model:{value:t.raavList[s].materialProvided,callback:function(e){t.$set(t.raavList[s],"materialProvided",e)},expression:"raavList[index].materialProvided"}},t._l(t.mpOptions,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)]}},{key:"geneRisk",fn:function(e){e.row;var s=e.index;return[a("Select",{staticStyle:{width:"100%"},attrs:{transfer:!0},model:{value:t.raavList[s].geneRisk,callback:function(e){t.$set(t.raavList[s],"geneRisk",e)},expression:"raavList[index].geneRisk"}},t._l(t.grOptions,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)]}},{key:"seroType",fn:function(e){var s=e.row,i=e.index;return[a("Select",{staticStyle:{width:"100%"},attrs:{transfer:!0},model:{value:t.raavList[i].seroType,callback:function(e){t.$set(t.raavList[i],"seroType",e)},expression:"raavList[index].seroType"}},t._l(t.stOptions,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1),t.isOtherSeroType(s.seroType)?a("Input",{attrs:{placeholder:"enter other serotype"},model:{value:t.raavList[i].otherSero,callback:function(e){t.$set(t.raavList[i],"otherSero",e)},expression:"raavList[index].otherSero"}}):t._e()]}},{key:"sharing",fn:function(e){e.row;var s=e.index;return[a("i-switch",{model:{value:t.raavList[s].sharing,callback:function(e){t.$set(t.raavList[s],"sharing",e)},expression:"raavList[index].sharing"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("yes")))]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("no")))])])]}},{key:"count",fn:function(e){e.row;var s=e.index;return[a("InputNumber",{staticStyle:{width:"100%"},attrs:{min:1},model:{value:t.raavList[s].requestnum,callback:function(e){t.$set(t.raavList[s],"requestnum",e)},expression:"raavList[index].requestnum"}})]}},{key:"remark",fn:function(e){e.row;var s=e.index;return[a("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"Enter something..."},model:{value:t.raavList[s].remark,callback:function(e){t.$set(t.raavList[s],"remark",e)},expression:"raavList[index].remark"}})]}},{key:"action",fn:function(e){var s=e.row;return[a("Poptip",{attrs:{confirm:"",transfer:!0,disabled:t.raavList.length<=1,placement:"top-end",title:"Are you sure you want to delete this item?"},on:{"on-ok":function(e){return t.deleteItem(s.key)}}},[a("Button",{attrs:{size:"small",type:"error",disabled:t.raavList.length<=1}},[t._v(t._s(t.$t("delete")))])],1)]}}])}),a("Card",{staticStyle:{width:"100%"},attrs:{title:t.$t("remark")}},[a("Input",{attrs:{type:"textarea",rows:3,placeholder:"Enter something..."},model:{value:t.taskRemark,callback:function(e){t.taskRemark=e},expression:"taskRemark"}})],1)],1),a("v-loading",{attrs:{show:t.loading}})],1)},ft=[],vt=a("2909"),gt=(a("d81d"),a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%",border:"2px solid darkgrey",height:"122px"}},[a("div",{staticStyle:{width:"25%",height:"120px","line-height":"120px","font-weight":"bold","font-size":"30px",display:"inline-block","border-right":"1px dashed darkgrey","text-align":"center","vertical-align":"top"}},[t._v(" "+t._s(t.$t("userInfo.pi"))+" ")]),a("div",{staticStyle:{width:"25%",height:"120px","font-size":"30px",display:"inline-block","border-right":"2px solid darkgrey","text-align":"center"}},[a("div",{staticStyle:{width:"100%",height:"39px","line-height":"35px","text-align":"left","font-size":"16px","border-bottom":"1px dashed darkgrey"}},[a("Icon",{attrs:{type:"ios-contact"}}),t._v(" "+t._s(t.$t("userInfo.piName"))+"："),a("Tag",{attrs:{color:"geekblue"}},[t._v(t._s(t.group.admin.name))])],1),a("div",{staticStyle:{width:"100%",height:"39px","line-height":"35px","text-align":"left","font-size":"16px","border-bottom":"1px dashed darkgrey"}},[a("Icon",{attrs:{type:"ios-mail"}}),t._v(" "+t._s(t.$t("userInfo.piEmail"))+"："),a("Tag",{attrs:{color:"geekblue"}},[t._v(t._s(t.group.admin.email))])],1),a("div",{staticStyle:{width:"100%",height:"39px","line-height":"35px","text-align":"left","font-size":"16px"}},[a("Icon",{attrs:{type:"ios-call"}}),t._v(" "+t._s(t.$t("userInfo.piPhone"))+"： ")],1)]),a("div",{staticStyle:{width:"25%",height:"120px","line-height":"120px","font-weight":"bold","font-size":"30px","vertical-align":"top",display:"inline-block","border-right":"1px dashed darkgrey","text-align":"center"}},[t._v(" "+t._s(t.$t("userInfo.serviceRequester"))+" ")]),a("div",{staticStyle:{width:"25%",height:"120px","font-size":"30px",display:"inline-block","text-align":"center"}},[a("div",{staticStyle:{width:"100%",height:"39px","line-height":"35px","text-align":"left","font-size":"16px","border-bottom":"1px dashed darkgrey"}},[a("Icon",{attrs:{type:"ios-contact"}}),t._v(" "+t._s(t.$t("userInfo.requester"))+"："),a("Tag",{attrs:{color:"geekblue"}},[t._v(t._s(t.userInfo.name))])],1),a("div",{staticStyle:{width:"100%",height:"39px","line-height":"35px","text-align":"left","font-size":"16px","border-bottom":"1px dashed darkgrey"}},[a("Icon",{attrs:{type:"ios-mail"}}),t._v(" "+t._s(t.$t("userInfo.requesterEmail"))+"："),a("Tag",{attrs:{color:"geekblue"}},[t._v(t._s(t.userInfo.email))])],1),a("div",{staticStyle:{width:"100%",height:"39px","line-height":"35px","text-align":"left","font-size":"16px"}},[a("Icon",{attrs:{type:"ios-call"}}),t._v(" "+t._s(t.$t("userInfo.requesterPhone"))+"： ")],1)])])}),yt=[],kt={name:"userInfo",data:function(){return{group:{}}},mounted:function(){this.initPage()},methods:{initPage:function(){var t=this;this.$axios.get("/home/getGroupInfo").then((function(e){"success"===e.data.code?t.group=e.data.retMap.group:t.$Message.error(t.$t(e.data.code))})).catch((function(e){console.log(e),t.$Message.error(t.$t("err.groupErr"))}))}},computed:{userInfo:function(){return this.$store.getters.getUser}}},$t=kt,bt=Object(h["a"])($t,gt,yt,!1,null,"6de5b8d0",null),_t=bt.exports,xt=a("c437"),wt=a.n(xt),St={name:"rAAVpackaging",components:{VLoading:v,UserInfo:_t},data:function(){return{mpOptions:[],grOptions:[],stOptions:[],loading:!1,tipShow:!0,iknow:!1,taskRemark:"",raavList:[{key:wt()(),constructName:"",materialProvided:"",geneRisk:"",seroType:"",sharing:!1,requestnum:1,remark:""}],cols:[]}},mounted:function(){this.initPage()},methods:{checkData:function(){for(var t=0;t<this.raavList.length;t++){var e=this.raavList[t];if(c.isNull(e.constructName))return this.$Message.error(this.$t("raav.constructName")+this.$t("notnull")),!1;if(c.isNull(e.materialProvided))return this.$Message.error(this.$t("raav.materialProvided")+this.$t("notnull")),!1;if(c.isNull(e.geneRisk))return this.$Message.error(this.$t("raav.geneRisk")+this.$t("notnull")),!1;if(c.isNull(e.seroType))return this.$Message.error(this.$t("raav.seroType")+this.$t("notnull")),!1;if(this.isOtherSeroType(e.seroType)&&c.isNull(e.otherSero))return this.$Message.error(this.$t("raav.seroType")+this.$t("notnull")),!1;if(""===e.requestnum||null===e.requestnum||void 0===e.requestnum)return this.$Message.error(this.$t("raav.count")+this.$t("notnull")),!1}return!0},commitTask:function(){var t=this;if(this.checkData()){this.raavList.map((function(e){t.isOtherSeroType(e.seroType)&&(e.seroType=e.otherSero)}));var e={list:JSON.stringify(this.raavList),taskRemark:this.taskRemark};this.loading=!0;var a=this;this.$axios.post("/task/commitraav",e).then((function(t){a.loading=!1,"success"===t.data.code?(console.log(t),a.$router.push("/home")):a.$Message.error(a.$t(t.data.code))})).catch((function(t){a.loading=!1,console.log(t),a.$t("err.systemErr")}))}},addNewRow:function(){console.log(this.raavList),this.raavList.push({key:wt()(),constructName:"",materialProvided:"",geneRisk:"",seroType:"",sharing:!1,requestnum:1,remark:""})},deleteItem:function(t){var e=Object(vt["a"])(this.raavList);this.raavList=e.filter((function(e){return e.key!==t}))},isOtherSeroType:function(t){for(var e=0;e<this.stOptions.length;e++)if(this.stOptions[e].id===t&&"Other"===this.stOptions[e].name)return!0;return!1},initPage:function(){this.initCols();var t=this;this.$axios.get("/task/initRaavTask").then((function(e){"success"===e.data.code?(t.mpOptions=e.data.retMap.mpOptions,t.grOptions=e.data.retMap.grOptions,t.stOptions=e.data.retMap.stOptions):t.$Message.error(t.$t(e.data.code))})).catch((function(e){console.log(e),t.$Message.error(t.$t("err.systemErr"))}))},initCols:function(){this.cols=new Array,this.cols.push({type:"index",width:60,align:"center"}),this.cols.push({title:this.$t("raav.constructName"),slot:"constructName"}),this.cols.push({title:this.$t("raav.materialProvided"),slot:"materialProvided"}),this.cols.push({title:this.$t("raav.geneRisk"),slot:"geneRisk"}),this.cols.push({title:this.$t("raav.seroType"),slot:"seroType"}),this.cols.push({title:this.$t("raav.sharing"),slot:"sharing",width:"100px"}),this.cols.push({title:this.$t("raav.count"),slot:"count",width:"100px"}),this.cols.push({title:this.$t("raav.remark"),slot:"remark"}),this.cols.push({title:"Action",slot:"action",width:100,align:"center"})}},computed:{}},Ot=St,Ct=Object(h["a"])(Ot,ht,ft,!1,null,"f4d34ac4",null),Pt=Ct.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"menu-div"},[a("Menu",{staticStyle:{width:"100%",height:"100%"},attrs:{theme:"dark","active-name":t.flag},on:{"on-select":t.changeTab}},[a("MenuItem",{attrs:{name:"select"}},[a("Icon",{attrs:{type:"md-arrow-dropdown"}}),t._v(" "+t._s(t.$t("configPage.select"))+" ")],1),a("MenuItem",{attrs:{name:"process"}},[a("Icon",{attrs:{type:"md-code-working"}}),t._v(" "+t._s(t.$t("configPage.process"))+" ")],1),a("MenuItem",{attrs:{name:"3"}},[a("Icon",{attrs:{type:"md-heart"}}),t._v(" 用户留存 ")],1),a("MenuItem",{attrs:{name:"4"}},[a("Icon",{attrs:{type:"md-leaf"}}),t._v(" 流失用户 ")],1)],1)],1),a("div",{staticClass:"config-contain"},["select"===t.flag?a("select-config"):t._e(),"process"===t.flag?a("process-config"):t._e()],1)])},It=[],Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Tabs",{attrs:{type:"card"}},[a("TabPane",{attrs:{label:t.$t("configPage.raavSelect")}},[a("raav-select",{on:{loading:t.showLoading}})],1),a("TabPane",{attrs:{label:"标签二"}},[t._v("标签二的内容")]),a("TabPane",{attrs:{label:"标签三"}},[t._v("标签三的内容")])],1),a("v-loading",{attrs:{show:t.loading}})],1)},Mt=[],At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 col-md-4 col-lg-4 col-xl-4 service-item"},[a("Card",{staticStyle:{width:"100%"}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-film-outline"}}),t._v(" "+t._s(t.$t("raav.materialProvided"))+" ")],1),a("Button",{attrs:{slot:"extra",size:"small",type:"primary"},on:{click:function(e){return t.addMaterialProvided("materialProvided")}},slot:"extra"},[t._v(t._s(t.$t("add")))]),a("ul",t._l(t.mpOptions,(function(e){return a("li",{key:e.id,staticStyle:{"list-style-type":"none"}},[a("div",{staticStyle:{width:"100%","margin-top":"10px"}},[t._v(" "+t._s(e.name)+" "),a("Poptip",{staticStyle:{float:"right"},attrs:{confirm:"",transfer:!0,placement:"top-end",title:"Are you sure you want to delete this item?"},on:{"on-ok":function(a){return t.deleteOption(e.id)}}},[a("Button",{staticStyle:{float:"right"},attrs:{size:"small",type:"error"}},[t._v(t._s(t.$t("delete")))])],1)],1)])})),0)],1)],1),a("div",{staticClass:"col-sm-4 col-md-4 col-lg-4 col-xl-4 service-item"},[a("Card",{staticStyle:{width:"100%"}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-film-outline"}}),t._v(" "+t._s(t.$t("raav.geneRisk"))+" ")],1),a("Button",{attrs:{slot:"extra",size:"small",type:"primary"},on:{click:function(e){return t.addMaterialProvided("geneRisk")}},slot:"extra"},[t._v(t._s(t.$t("add")))]),a("ul",t._l(t.grOptions,(function(e){return a("li",{key:e.id,staticStyle:{"list-style-type":"none"}},[a("div",{staticStyle:{width:"100%","margin-top":"10px"}},[t._v(" "+t._s(e.name)+" "),a("Poptip",{staticStyle:{float:"right"},attrs:{confirm:"",transfer:!0,placement:"top-end",title:"Are you sure you want to delete this item?"},on:{"on-ok":function(a){return t.deleteOption(e.id)}}},[a("Button",{attrs:{size:"small",type:"error"}},[t._v(t._s(t.$t("delete")))])],1)],1)])})),0)],1)],1),a("div",{staticClass:"col-sm-4 col-md-4 col-lg-4 col-xl-4 service-item"},[a("Card",{staticStyle:{width:"100%"}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-film-outline"}}),t._v(" "+t._s(t.$t("raav.seroType"))+" ")],1),a("Button",{attrs:{slot:"extra",size:"small",type:"primary"},on:{click:function(e){return t.addMaterialProvided("seroType")}},slot:"extra"},[t._v(t._s(t.$t("add")))]),a("ul",t._l(t.stOptions,(function(e){return a("li",{key:e.id,staticStyle:{"list-style-type":"none"}},[a("div",{staticStyle:{width:"100%","margin-top":"10px"}},[t._v(" "+t._s(e.name)+" "),a("Poptip",{staticStyle:{float:"right"},attrs:{confirm:"",transfer:!0,placement:"top-end",title:"Are you sure you want to delete this item?"},on:{"on-ok":function(a){return t.deleteOption(e.id)}}},[a("Button",{attrs:{size:"small",type:"error"}},[t._v(t._s(t.$t("delete")))])],1)],1)])})),0)],1)],1)]),a("Modal",{attrs:{title:t.$t("add")},on:{"on-ok":t.commitNewOption},model:{value:t.addNewFlag,callback:function(e){t.addNewFlag=e},expression:"addNewFlag"}},[a("Form",{ref:"selValidate",attrs:{model:t.sel,rules:t.selRules,"label-width":120}},[a("FormItem",{attrs:{label:t.$t("raav.optionName"),prop:"name"}},[a("Input",{attrs:{placeholder:t.$t("raav.optionName")},model:{value:t.sel.name,callback:function(e){t.$set(t.sel,"name",e)},expression:"sel.name"}})],1),a("FormItem",{attrs:{label:t.$t("raav.optionEnName"),prop:"enName"}},[a("Input",{attrs:{placeholder:t.$t("raav.optionEnName")},model:{value:t.sel.enName,callback:function(e){t.$set(t.sel,"enName",e)},expression:"sel.enName"}})],1)],1)],1)],1)},Lt=[],jt={name:"raavSelect",data:function(){return{loading:!0,addNewFlag:!1,mpOptions:[],grOptions:[],stOptions:[],sel:{name:"",enName:"",selecttype:"",pagetype:"raav"},selRules:{name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],enName:[{required:!0,message:"The name cannot be empty",trigger:"blur"}]}}},beforeMount:function(){this.initPage()},methods:{deleteOption:function(t){var e={id:t};this.$emit("loading",!0);var a=this;this.$axios.post("/config/deleteOption",e).then((function(t){a.$emit("loading",!1),"success"===t.data.code?a.initPage():a.$Message.error(a.$t(t.data.code))})).catch((function(t){a.$emit("loading",!1),console.log(t),a.$Message.error(a.$t("err.systemErr"))}))},addMaterialProvided:function(t){this.sel.selecttype=t,this.addNewFlag=!0},commitNewOption:function(){var t=this;this.$refs["selValidate"].validate((function(e){if(e){t.$emit("loading",!0);var a={option:JSON.stringify(t.sel)};t.$axios.post("/config/addNewOption",a).then((function(e){t.$emit("loading",!1),"success"===e.data.code?(t.addNewFlag=!1,t.initPage()):t.$Message.error(t.$t(e.data.code))})).catch((function(e){t.$emit("loading",!1),console.log(e),t.$Message.error(t.$t("err.systemErr"))}))}else t.addNewFlag=!0,t.$Message.error(t.$t("err.placeEnter"))}))},initPage:function(){var t=this;this.$axios.get("/config/initRaavSelect").then((function(e){"success"===e.data.code?(t.mpOptions=e.data.retMap.mpOptions,t.grOptions=e.data.retMap.grOptions,t.stOptions=e.data.retMap.stOptions):t.$Message.error(t.$t(e.data.code))})).catch((function(e){console.log(e),t.$Message.error(t.$t("err.systemErr"))}))}}},Nt=jt,Rt=Object(h["a"])(Nt,At,Lt,!1,null,"d2bc2570",null),zt=Rt.exports,Ft={name:"selectConfig",components:{VLoading:v,RaavSelect:zt},data:function(){return{loading:!1}},methods:{showLoading:function(t){this.loading=t}}},Vt=Ft,qt=Object(h["a"])(Vt,Et,Mt,!1,null,"5b0fd06f",null),Bt=qt.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Tabs",{attrs:{type:"card"}},[a("TabPane",{attrs:{label:t.$t("configPage.email")}},[a("pi-confirm-config")],1)],1)],1)},Dt=[],Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("Card",{staticStyle:{width:"100%"},attrs:{title:t.$t("configPage.taskConfirm")}},[a("div",{staticClass:"row"},t._l(t.groups,(function(e){return a("div",{key:e.id,staticClass:"col-sm-4 col-md-3 col-lg-3 col-xl-3",staticStyle:{"margin-bottom":"20px"}},[a("Card",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{"text-align":"left","font-weight":"bold",display:"inline-block"}},[t._v(" "+t._s(e.groupname)+" ")]),a("i-switch",{staticStyle:{display:"inline-block",float:"right"},attrs:{size:"large"},nativeOn:{click:function(a){return t.changeStatu(e)}},model:{value:e.email,callback:function(a){t.$set(e,"email",a)},expression:"item.email"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("yes")))]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("no")))])])],1)],1)})),0)])],1)},Gt=[],Ht={name:"piConfirmConfig",data:function(){return{groups:[]}},mounted:function(){this.initPage()},methods:{initPage:function(){var t=this;this.$axios.get("/config/getAllEmailConfig").then((function(e){t.groups=e.data.retMap.groupSettings})).catch((function(t){console.log(t)}))},changeStatu:function(t){var e={setting:JSON.stringify(t)},a=this;this.$axios.post("/config/changePiConfirm",e).then((function(t){console.log(t),a.initPage(),a.$Message.success(a.$t("commitSuccess"))})).catch((function(t){console.log(t),a.$Message.error(a.$t("err.systemErr"))}))}}},Qt=Ht,Wt=Object(h["a"])(Qt,Jt,Gt,!1,null,"be8ac664",null),Kt=Wt.exports,Xt={name:"processConfig",components:{PiConfirmConfig:Kt}},Yt=Xt,Zt=Object(h["a"])(Yt,Ut,Dt,!1,null,"12dbbe3a",null),te=Zt.exports,ee={name:"configmain",components:{ProcessConfig:te,SelectConfig:Bt},data:function(){return{split:.2,flag:"select"}},methods:{changeTab:function(t){this.flag=t}}},ae=ee,se=(a("86d3"),Object(h["a"])(ae,Tt,It,!1,null,"374dd10a",null)),ie=se.exports;s["default"].use(E["a"]);var re=[{path:"",redirect:"/home"},{path:"/",redirect:"/home"},{path:"/home",component:ot,meta:{index:0}},{path:"/service",component:mt,meta:{index:1}},{path:"/rAAV",component:Pt,meta:{index:2}},{path:"/config",component:ie,meta:{index:3}}],ne=new E["a"]({routes:re}),oe=ne,le=a("1157"),ce=a.n(le),ue=(a("ab8b"),a("3e48"),a("bc3a")),de=a.n(ue),pe=a("a925"),me={confirm:"确认",home:"首页",serviceRequest:"服务申请",rAAVpackaging:"rAAV包装",hello:"你好",config:"配置中心",yes:"是",no:"否",exit:"退出",add:"新增",delete:"删除",commit:"提交",notnull:"不能为空！",remark:"备注",edit:"修改",commitSuccess:"提交成功",reason:"原因",cancel:"取消",task:{evaluation:"评价",piRefuse:"PI拒绝：",placeEnterReason:"请填写原因！",delete:"撤回",approve:"审批",agreeTask:"是否同意本次任务？",process:"进度",wait:"等待确认",taskList:"任务列表",receive:"订单接收",prepare:"实验准备",package:"病毒包装",purification:"病毒纯化",testing:"滴度测定",complete:"完成",operator:"操作",PiConfirm:"等待PI确认",statusErr:"任务状态发生变化，请刷新页面之后重试！",cilentConfrim:"用户确认",taskComplete:"订单是否已经完成？",stars:"请对本次服务做出评价",suggest:"留下您的建议",deleteTask:"您确定要删除此项任务么？"},raav:{optionName:"选项名称",optionEnName:"选项英文名称",title:"rAAV包装",tipTitle:"注意",tip1:"1.默认rAAV包装量为3个15cm培养皿(低得率血清型为6皿)，如果需要更大包装量，请注明",tip2:"2.请务必确认所提供质粒和表达框架的正确性。",tip3:"3.强烈建议在收到rAAV后尽快分装为合适的体积并存储与-80℃，并避免反复冻融。",tip4:"4.rAAV仍属于感染性材料，操作过程中请务必严格遵守生物安全制度。",ikonw:"我已知晓",constructName:"载体名称或质粒编号",materialProvided:"材料提供",geneRisk:"表达基因风险性",seroType:"血清型",sharing:"是否共享",count:"数量",projectInfo:"详细信息",remark:"备注",alreadyExist:"该选项已存在！"},userInfo:{pi:"实验室负责人",piName:"实验室负责人",piEmail:"实验室负责人邮箱",piPhone:"实验室负责人电话",serviceRequester:"服务申请人",requester:"申请人",requesterEmail:"申请人邮箱",requesterPhone:"申请人电话"},configPage:{select:"下拉选项管理",raavSelect:"raav下拉选项管理",email:"邮件通知PI",process:"流程管理",taskConfirm:"任务是否需要PI确认"},err:{E500:"系统异常!",systemErr:"系统异常！",groupErr:"获取用户组信息失败，请刷新重试！",placeEnter:"请填写完整表单！"}},he=me,fe={},ve=fe;s["default"].use(pe["a"]);var ge=new pe["a"]({locale:localStorage.getItem("local")||"zh",messages:{zh:he,en:ve}}),ye=ge,ke=a("2f62");s["default"].use(ke["a"]);var $e=new ke["a"].Store({state:{user:{}},mutations:{saveUser:function(t,e){void 0!==e&&e!=={}||(e={name:"hi",roles:[],group:{}}),t.user=e}},getters:{getUser:function(t){return t.user},isResearcher:function(t){for(var e=0;e<t.user.roles.length;e++){var a=t.user.roles[e];if("999999"==a.roletype||"01"==a.roletype)return!0}return!1},isFeeder:function(t){for(var e=0;e<t.user.roles.length;e++){var a=t.user.roles[e];if("999999"==a.roletype||"02"==a.roletype)return!0}return!1},isReviewer:function(t){for(var e=0;e<t.user.roles.length;e++){var a=t.user.roles[e];if("999999"==a.roletype||"40"==a.roletype)return!0}return!1},isVectorEditor:function(t){if(void 0===t.user.roles||null===t.user.roles)return!1;for(var e=0;e<t.user.roles.length;e++){var a=t.user.roles[e];if("999999"==a.roletype||"90"==a.roletype)return!0}return!1},isAdmin:function(t){for(var e=0;e<t.user.roles.length;e++){var a=t.user.roles[e];if("999999"==a.roletype)return!0}return!1},isBioAna:function(t){for(var e=0;e<t.user.roles.length;e++){var a=t.user.roles[e];if("999999"==a.roletype||"34"==a.roletype)return!0}return!1},isGroupAdmin:function(t){if(t.user.group.groupadmin==t.user.id)return!0},isOther:function(t){for(var e=0;e<t.user.roles.length;e++){var a=t.user.roles[e];if("999999"==a.roletype||"09"==a.roletype)return!0}return!1},isCurrentUser:function(t){return function(e){if(t.user.id==e)return!0;for(var a=0;a<t.user.roles.length;a++){var s=t.user.roles[a];if("999999"==s.roletype)return!0}return!1}},isCurrentUserByName:function(t){return function(e){if(t.user.name==e)return!0;for(var a=0;a<t.user.roles.length;a++){var s=t.user.roles[a];if("999999"==s.roletype)return!0}return!1}}}}),be=a("e069"),_e=a.n(be);a("dcad");s["default"].use(_e.a),s["default"].config.productionTip=!1,s["default"].prototype.$=ce.a,s["default"].prototype.$axios=de.a,de.a.defaults.baseURL="",new s["default"]({i18n:ye,router:oe,store:$e,render:function(t){return t(I)}}).$mount("#app")},6227:function(t,e,a){},"66d1":function(t,e,a){},"85ec":function(t,e,a){},"86d3":function(t,e,a){"use strict";a("66d1")},9307:function(t,e,a){},ba2f:function(t,e,a){},bbec:function(t,e,a){t.exports=a.p+"img/backVir.9d709da5.png"},c676:function(t,e,a){t.exports=a.p+"img/carrier.a7ddde2c.png"},da17:function(t,e,a){"use strict";a("ba2f")}});
//# sourceMappingURL=app.59a908c4.js.map